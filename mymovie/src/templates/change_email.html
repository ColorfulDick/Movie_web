<!DOCTYPE html> 
{% load staticfiles %} 
<html lang="en">
   <head>
      <meta charset="UTF-8">
         <title>重置邮箱</title>
            <style> .out{   width: 500px;   height: 900px;   margin: 0 auto;   margin-top: 100px; } </style>
             </head> 
             <body>       
             <div class="out">     
             <h1>可以重新设置自己的新邮箱啦！</h1>
                  <form method="post" action="{% url 'change_email' %}">
                         <P><span>新邮箱：</span><input type="text" id="newemail" name="newemail" onkeyup="em()" placeholder="请输入新的邮箱"><span id="tishi"></span></P>
                               
                         {% csrf_token %}       
                         <input type="hidden" name="email" value="{{ email }}">       
                         <p><input type="submit" value="确认" id="submit"></p>     
                   </form>     
                   <h1>{{ msg }}</h1>   
             </div>   
     </body> 
<script> 
function em() {
    var email = document.getElementById("newemail").value;
    var reg = /^\w+@[a-zA-Z0-9]{2,10}(?:\.[a-z]{2,4}){1,3}$/;
    if(!reg.test(email)||email==""){
        document.getElementById("tishi").innerHTML="<font color='red'>邮箱格式不正确</font>";
        document.getElementById("submit").disabled = true; 
    }
    else{
        document.getElementById("tishi").innerHTML="<font color='green'>邮箱格式正确</font>";
        document.getElementById("submit").disabled = false;
    }
  }
</script>

</html> 